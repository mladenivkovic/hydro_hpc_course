#!/bin/bash

#  A "shortcut" to execute the correct scripts.
#    Usage: hydro_makemovie [options]
#    Options:
#    -h  display help
#    -limits <low> <high> create movie for parallel execution 
#    output with same colorbars, where <low> is the lower limit for 
#    the colorbar and <high> is the upper limit.
#    -p  create movie for parallel execution output
#    -s  create movie for serial execution output


if [[ "$#" -ge "1" ]]
    then
        while [[ "$#" -gt "0" ]]
        do
            case "$1" in
            -h)
                echo ' A "shortcut" to execute the correct scripts.'
                echo ''
                echo ' Usage: hydro_makemovie [options]'
                echo ''
                echo ' It puts the .png output in subdirectory picoutput_parallel.'
                echo ' The script requires to be run in the same directory as the'
                echo ' hydro output is and needs a hydro_runinfo.txt file, which'
                echo ' is generated by the hydro script.'
                echo ''
                echo ' Options:'
                echo ' -h  display help'
                echo ' -l <low> <high> create movie for parallel execution '
                echo ' output with same colorbars, where <low> is the lower limit for '
                echo ' the colorbar and <high> is the upper limit.'
                echo ' -p  create movie for parallel execution output'
                echo ' -s  create movie for serial execution output'
                exit
            ;;
            -s)
                "Creating movie from serial output."
                hydro-makemovie_serial
                exit
            ;;
            -p)
                echo "Creating movie from parallel output."
                hydro-makemovie_parallel_dry
                exit
            ;;
            -l)
                if [ "$#" -gt 3 ] ; then
                    echo " Too many arguments given. Can't handle the pressure. Exiting."
                    exit
                elif [ "$#" -lt 3 ] ; then
                    echo " Too few arguments given. Can't handle the pressure. Exiting."
                    exit
                else
                    echo "Creating movie from parallel output with same colorbar for all images."
                    hydro-makemovie_parallel_samecolorbar "$2" "$3"
                    exit
                fi
            ;;
        esac
        done
    else
        echo "no argument given. User hydro_makemovie -h for help."
        exit
fi

